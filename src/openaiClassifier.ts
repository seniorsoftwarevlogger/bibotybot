import { OpenAI } from "openai";
import dotenv from "dotenv";

dotenv.config();

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

const spamExamples = [
  "ะัy ะปัะดeะน ะถะตะปaััะธั ัะพัoัะพ ะทaัะฐะฑะฐััะฒaัั ะฒ ัะดะฐะปeะฝะฝะพะผ ัopะผะฐัะต. ะa ะฟะพะดัoะฑะฝะพัััะผะธ ะฟะธัะธัe ะฒ ะปะธัะฝัe ัะพoะฑัeะฝะธั.",
  "Eัะปะธ ั ัะตะฑั eััั 30 ะผะธะฝัั cะฒะพะฑะพะดะฝัั ะฒ ะดeะฝั ะธ ะถeะปะฐะฝะธะต ะทaัะฐะฑะฐััะฒะฐัั. ะขoะณะดะฐ ะถะดy ะฒ ะC. Oั 300$ ะฒ ะดeะฝั.",
  "3ะดpaะฒcัะฒyะนัe, ะธัy ะฟapัะฝััะพะฒ ะดะปั coััyะดะฝะธัะตััะฒa. Cะฒoะฑoะดะฝัะน ะณpaัะธะบ๐ ะpะธััะฝัะน 3apaะฑoัoะบ oั 200$ ะฒ ะดeะฝั Ecะปะธ ะธะฝัepecัeั ะฟoะดpoะฑะฝaั ะธะฝัopะผaัะธั " +
    " ะฒ ะปะธัะฝัะต ัooะฑัะตะฝะธั",
  "ะะฐะฑะธัะฐั ะบะพะผะฐะฝะดั ะดะปั ะฟะฐััะฝะตัััะฒะฐ ะฝะฐ ะทะฒะฐะธะผะพะฒัะณะพะดะฝะพะน ะพัะฝะพะฒะต. ะะถะตะดะฝะตะฒะฝะฐั ะฟัะธะฑัะปั ะฝะฐ ะฟะฐัะธะฒะต. ะะดั ะฒ ะปะธัะฝัั ัะพะพะฑัะตะฝะธัั.",
  "ะoะฑััะน ะดeะฝั! ะัeะผ ะปัะดeะน ะดะปั ัoะดััะดะฝะธัะตััะฒะฐ  oั 21 ะณoะดะฐ. ะะถeะดะฝะตะฒะฝัะน ะดoัะพะด ะพั 600 ะดะปั. ะะธัะธัะต + ะฒ ะปะธัะฝัะต ัะผั ะบัะพ ะทะฐะธะฝัะตัะตัะพะฒะฐะฝ.",
  "ัะพัะตัั แดะพะธ ะฝัะดcั ะธ สะธะดocั ะบaะบ ะผะตสั ะธแดeัั ? ะฟะพะดะฟะธcัะฒะฐะนcั ัะพะณะดะฐ ๐ฅ",
  "ะทแดััะป ะฑั ะบัแด ส ะผะตะฝั ๐",
  "ัะพัะตัั ะผะตะฝั?",
  "ะะพะฑััะน ะดะตะฝั, ัะพัััะดะฝะธัะฐั ั ะฐะฒัะพัะบะพะปะพะน, ะตััั ะฒะพะทะผะพะถะฝะพััั ะฟะพะผะพัั ัะพ ัะดะฐัะตะน ะธ ะดะพะบัะผะตะฝัะฐะผะธ. ะะพะปััะตะฝะธะต ัะพะปัะบะพ ะฟัะธ ะปะธัะฝะพะน ะฒัััะตัะต, ะฒัะต ะฟะพะดัะพะฑะฝะพััะธ ะฒ ะปะธัะฝัั ัะพะพะฑัะตะฝะธัั!",
  "ะัะถะฝะพ ะฟะพะบัะฐัะธัั ะทะฐะฑะพั, ะบัะพ ัะพัะตั ะผะพะถะตั ะฟะพะผะพัั, ะกะบะพะปัะบะพ ัะดะตะปะฐะตัะต ััะพะปัะบะพ ะธ ะดะฐะผ(300-3000)",
  "ะะพะฑััะน ะดะตะฝั! ะะตะฑััะฐ, ะฝะต ะฒ ัะตะผั ะฟะธัั, ะฝะพ ะณะพัะพะฒ ะบัะพ ะฝะฐ ัะดะฐะปัะฝะบั? ะะพ ะดะตะฝัะณะฐะผ ะฝะต ะพะฑะธะถั.",
  "ะกัะพัะฝะพ ะฝัะถะฝั ะปัะดะธ, ะตััั ะฟะพะดัะฐะฑะพัะบะฐ ะฝะฐ ะทะฐะฒััะฐ,ะทะฐะฟะปะฐัั ะฟะพ 5 ััััั ,ะฟะพ ะฒัะตะผ ะฒะพะฟัะพัะฐะผ ะฟะธัะฐัั ะฒ ะปั",
  "ะัะตะผ ะฟัะธะฒะตั, ะธัั ะฟะพะผะพัะฝะธะบะพะฒ ะฒ ะบะพัะตะนะฝั. ะฃะฑะพัะบะฐ ะทะพะฝั ะฒัะดะฐัะธ, ัะตัะฒะธัะพะฒะบะฐ ััะพะปะพะฒ, ะฒ ะดะตะฝั 4500ั + ะบะพัะต ะธ ะดะตัะตััั ะฑะตัะฟะปะฐัะฝะพ. ะะพะถะฝะพ ั 16 ะปะตั. ะะธัะธัะต ะฒ ะะก",
  "ะะพัะพะฒ ะบัะฟะธัั ะฎะกะะก tRc20. ะะธะฑะบะพ ะฟะพ ะฒัะตะผะตะฝะธ. ะะตัั ะบััะฟะฝะพ, ะผะตะปะพัั ะฝะต ะธะฝัะตัะตััะตั.",
  `์๋ผ๋ ์์ด๋๋ ใฑใฑ๐

โช๏ธ ํ๋ฒํ ๋๋ ์๋๊ณ, ์ด๋ฒ์ ๋ฃฐ๋ ๋๋ฆฌ๋ ๋ฐฉ์ใใ  
์์ ๋๋ค์ด๋ผ ๋ค๋ค ์ฐฌ์ค๋ ์์. ๊ทผ๋ฐ ์ฌ์ด ๊ฑด ์๋;;

์ฌ์ดํธ ๊ฐ์ ๋ฃฐ๋ ๋๋ฆฌ๋ฉด 0~5 SOL ๋๋ค์ผ๋ก ์ค  
๋ ในใ ํฐ์ก์ (์คํฌ๋ฆฐ ์ฐธ๊ณ), ๊ทผ๋ฐ ๋ค๋ค ๊ทธ๋ฐ ๊ฑด ์๋. ์ด๋นจ๊ฒ ใใ?

์ฐธ๊ณ๋ก, ๋ ์ด ์ข์์ 5 SOL ํธ์์ด!

๐ ์ฌ๊ธฐ ๋งํฌ ํ๊ณ ๋๋ค๋ณด์  
์ง๊ฐ ์ฌ๋ฌ ๊ฐ ๊ฐ๋ฅํจ. ๋จ, ํ๋ ์ค์ธ ์ง๊ฐ๋ง ใฑใ

UPD:  
์ด์ ์ํ ์๊น โ ํ๋ฃจ 1,000๋ช๊น์ง๋ง ๋๋ฆด ์ ์์   
๋ฆ์ผ๋ฉด ๋ด์ผ ใฑใฑ ํด์ผ๋ ใใ`
];

export async function classifyMessageOpenAI(message: string): Promise<boolean> {
  const prompt = `
ะะฟัะตะดะตะปะธ, ัะฒะปัะตััั ะปะธ ัะปะตะดัััะตะต ัะพะพะฑัะตะฝะธะต ััะพัะธัะตัะบะธะผ ัะฟะฐะผะพะผ, ะฒะพะฒะปะตัะตะฝะธะตะผ ะฒ ัะพะผะฝะธัะตะปัะฝัะต ะฟัะตะดะปะพะถะตะฝะธั ะพ ัะพัััะดะฝะธัะตััะฒะต, ัะตะบะปะฐะผะฐ ะบัะธะฟัะพ ะผะพะฝะตั, ะฟะพะบัะฟะบะธ USDT ะธะปะธ ะฟัะตะดะปะพะถะตะฝะธะต ะพ ัะฐะฑะพัะต. ะขะฐะบ ะถะต ััะธััะฒะฐะน, ััะพ ัะพะพะฑัะตะฝะธั ะผะพะณัั ะฑััั ะฝะฐ ะดััะณะธั ัะทัะบะฐั. ะฃัะธััะฒะฐะน ัะปะตะดัััะธะต ะฟัะธะผะตัั ัะฟะฐะผ-ัะพะพะฑัะตะฝะธะน:

${spamExamples.map((example) => `- ${example}`).join("\n")}

ะกะพะพะฑัะตะฝะธะต ะดะปั ะบะปะฐััะธัะธะบะฐัะธะธ:
"${message}"

ะฏะฒะปัะตััั ะปะธ ััะพ ัะพะพะฑัะตะฝะธะต ัะฟะฐะผะพะผ? ะัะฒะตัั ัะพะปัะบะพ "ะดะฐ" ะธะปะธ "ะฝะตั".
`;

  try {
    const response = await openai.chat.completions.create({
      model: "gpt-4o-mini",
      messages: [
        {
          role: "system",
          content: "ะขั โ ัะบัะฟะตัั ะฟะพ ัะฟะฐะผั. ะขั ะพัะฒะตัะฐะตัั ัะพะปัะบะพ 'ะดะฐ' ะธะปะธ 'ะฝะตั'.",
        },
        {
          role: "user",
          content: prompt,
        },
      ],
      max_tokens: 1,
      n: 1,
      stop: null,
      temperature: 0.5,
    });

    const answer = response.choices[0].message.content?.trim().toLowerCase();
    return answer === "ะดะฐ";
  } catch (error) {
    console.error("Error classifying message with OpenAI:", error);
    return false;
  }
}
